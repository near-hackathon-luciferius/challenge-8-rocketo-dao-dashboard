(this["webpackJsonpdao-dashboard-react"]=this["webpackJsonpdao-dashboard-react"]||[]).push([[0],{140:function(e,t){var n=Object({NODE_ENV:"production",PUBLIC_URL:"/challenge-8-rocketo-dao-dashboard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).CONTRACT_NAME||"dao-dashboard.cryptosketches.testnet";e.exports=function(e){switch(e){case"production":case"mainnet":return{networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",contractName:n,walletUrl:"https://wallet.near.org",helperUrl:"https://helper.mainnet.near.org"};case"development":case"testnet":return{networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",contractName:n,walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org"};case"betanet":return{networkId:"betanet",nodeUrl:"https://rpc.betanet.near.org",contractName:n,walletUrl:"https://wallet.betanet.near.org",helperUrl:"https://helper.betanet.near.org"};case"local":return{networkId:"local",nodeUrl:"http://localhost:3030",keyPath:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/challenge-8-rocketo-dao-dashboard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).HOME,"/.near/validator_key.json"),walletUrl:"http://localhost:4000/wallet",contractName:n};case"test":case"ci":return{networkId:"shared-test",nodeUrl:"https://rpc.ci-testnet.near.org",contractName:n,masterAccount:"test.near"};case"ci-betanet":return{networkId:"shared-test-staging",nodeUrl:"https://rpc.ci-betanet.near.org",contractName:n,masterAccount:"test.near"};default:throw Error("Unconfigured environment '".concat(e,"'. Can be configured in src/config.js."))}}},211:function(e,t,n){},281:function(e,t,n){},282:function(e){e.exports=JSON.parse('{"name":"dao-dashboard-react","version":"1.0.19","homepage":"https://near-hackathon-luciferius.github.io/challenge-8-rocketo-dao-dashboard","private":true,"dependencies":{"@emotion/react":"^11.9.0","@emotion/styled":"^11.8.1","@mui/icons-material":"^5.6.2","@mui/material":"^5.6.2","@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","classnames":"^2.3.1","js-sha256":"^0.9.0","materialize-css":"^1.0.0-rc.2","near-api-js":"^0.42.0","numbro":"^2.3.6","rc-tooltip":"^5.1.1","react":"^17.0.0","react-burger-menu":"^3.0.6","react-circular-progressbar":"^2.0.4","react-dom":"^17.0.0","react-iframe":"^1.8.0","react-materialize":"^3.10.0","react-native-sha":"^0.1.6","react-router-dom":"^6.3.0","react-scripts":"4.0.3","save":"^2.4.0","save-dev":"^0.0.1-security","styled-components":"^5.2.0","web-vitals":"^1.0.1"},"scripts":{"start":"parcel src/index.html","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -d build -u \'Pages Bot <pages.bot@nonexisting.io>\'"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"gh-pages":"^3.2.3","parcel-bundler":"^1.12.5","sass":"^1.51.0"}}')},289:function(e,t){},298:function(e,t){},344:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(17),r=n(7),s=n.n(r),i=n(1),o=n.n(i),l=n(24),d=n.n(l),j=n(11),b=n(2),m=n(10),u=n(0);function h(e){var t=e.signIn;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("main",{id:"page-wrapper",children:[Object(u.jsx)("header",{children:Object(u.jsx)("h1",{children:"DAO Dashboard Homepage"})}),Object(u.jsx)(m.Button,{large:!0,onClick:t,className:"login",children:"Log in"}),Object(u.jsx)("p",{children:"This app was developed for the NEAR Spring hackathon. In order to use the app you need to sign in with your NEAR wallet."})]})})}var p=n(9),x=n(129),O=n.n(x),f=n(131),g=n.n(f),v=function(e){return Object(u.jsx)("div",{className:"popup-box",children:Object(u.jsxs)("div",{className:"box",children:[Object(u.jsx)("span",{className:"close-icon",onClick:e.handleClose,children:"x"}),e.content]})})},w=function(e){var t=e.currentUser,n=e.signIn,a=e.signOut,c=e.clearMessage,r=e.message;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{id:"App",children:[Object(u.jsx)(p.a,{}),t?Object(u.jsx)(m.Button,{onClick:a,floating:!0,large:!0,className:"btn-login",icon:Object(u.jsx)(O.a,{fontSize:"large",className:"btn-icon"}),tooltip:"Log out "+t.accountId+"."}):Object(u.jsx)(m.Button,{onClick:n,floating:!0,large:!0,className:"btn-login",icon:Object(u.jsx)(g.a,{fontSize:"large",className:"btn-icon"}),tooltip:"Log in using NEAR wallet."}),r&&Object(u.jsx)(v,{content:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("b",{children:"A message for you"}),Object(u.jsx)("p",{children:r})]}),handleClose:c})]})})},N=n(132),_=function(e){var t=e.setDao,n=Object(p.h)().dao;return Object(i.useEffect)((function(){t(n)}),[n,t]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(N.slide,{pageWrapId:"page-wrapper",outerContainerId:"App",children:[Object(u.jsx)(j.b,{className:"menu-item",to:"",children:"Dao Dashboard"}),Object(u.jsx)(j.b,{className:"menu-item",to:"jobs",children:"Jobs"}),Object(u.jsx)(j.b,{className:"menu-item",to:"tasks",children:"Tasks"}),Object(u.jsx)(j.b,{className:"menu-item",to:"members",children:"Members"}),Object(u.jsx)(j.b,{className:"menu-item",to:"governance",children:"Governance"})]}),Object(u.jsx)("main",{id:"page-wrapper",children:Object(u.jsx)(p.a,{})})]})};function y(e){var t=e.onDaoCreation;return Object(u.jsx)("form",{onSubmit:t,children:Object(u.jsxs)("fieldset",{id:"fieldset",className:"flex flex-col details-view flex-grow",children:[Object(u.jsxs)("div",{className:"highlight flex flex-col",children:[Object(u.jsx)("h5",{children:"Create a new DAO"}),Object(u.jsxs)("p",{children:["Hint: If you are looking for an existing DAO scroll down to see the list of all existing DAOs. ",Object(u.jsx)("br",{}),"Add all required parameter for the new job and hit the 'Create' button."]}),Object(u.jsx)(m.TextInput,{autoComplete:"off",autoFocus:!0,id:"name_prompt",label:"The name of your DAO.",required:!0}),Object(u.jsx)(m.Textarea,{id:"description_prompt",label:"A detailed description of your DAO.",required:!0}),Object(u.jsx)(m.TextInput,{autoComplete:"off",id:"icon_prompt",label:"An URL to you DAO icon. Optional."})]}),Object(u.jsx)(m.Button,{type:"submit",small:!0,tooltip:"Creates the DAO. This will costs 10 \u24c3.",children:"Create"})]})})}var k=n(89),C=n.n(k);function S(e){var t=e.version,n=e.currentUser,a=e.contract,r=e.onDaoCreation,o=Object(p.g)(),l=Object(i.useState)(!1),d=Object(b.a)(l,2),h=d[0],x=d[1],O=Object(i.useState)(!1),f=Object(b.a)(O,2),g=f[0],v=f[1],w=Object(i.useState)([]),N=Object(b.a)(w,2),_=N[0],k=N[1];Object(i.useEffect)((function(){function e(){return(e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.get_daos({});case 2:t=e.sent,console.log(t),x(t.includes(n.accountId)),k(t),v(!0);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a,n]);return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("main",{id:"page-wrapper",children:[Object(u.jsx)("header",{children:Object(u.jsxs)("h1",{children:["NEAR Challenge #8 - DAO Dashboard - ",t]})}),g?Object(u.jsx)("div",{className:"flex flex-row-wrap justify-between margin-row-small",children:h?Object(u.jsx)(m.Button,{large:!0,onClick:function(){return e=n.accountId,void o(e);var e},children:Object(u.jsxs)("div",{className:"flex flex-row",children:[Object(u.jsx)("div",{className:"min-margin-right",children:Object(u.jsx)(C.a,{className:"btn-icon"})}),Object(u.jsx)("div",{children:"Got To Your DAO"})]})}):Object(u.jsx)(y,{onDaoCreation:r})}):null,Object(u.jsxs)("div",{className:"text-bigger",children:[Object(u.jsx)("p",{className:"mb-4 mt-4",children:"This app solves the problem, that today DAOs have no centeral place for management. They have a central point of communication - which is Discord, but they have a heap of other tools for task management (trello), job postings (website), payment handling (manual), voting (snapshot) and drafting documents (google docs)."}),Object(u.jsx)("p",{className:"mb-4 mt-4",children:"This app combines all DAO related task into one unified DAO Management tool."}),Object(u.jsxs)("ol",{className:"mb-4 mt-4",children:[Object(u.jsx)("li",{children:"1. You can manage you DAO members and their roles which synchronizes with your Discord Server."}),Object(u.jsx)("li",{children:"2. You can manage, discuss, assign and provide payment for tasks. Tasks are payed in full after completion."}),Object(u.jsxs)("li",{children:["3. You can post job offerings, where your members can apply for the jobs. The payment is powered by ",Object(u.jsx)("a",{href:"https://www.roke.to/",children:"Roketo's"})," innovative money streaming. So your members get paid while they work."]}),Object(u.jsx)("li",{children:"4. You can draft proposals for you whole community to vote on."})]}),Object(u.jsx)("p",{className:"mb-4 mt-4",children:"All DAOs get their own custom website. If you are interested in seeing how that looks in real life, click on one of the existing DAOs down below and check their DAO Dashboard."})]}),Object(u.jsx)("h5",{children:"All Existing DAOs"}),Object(u.jsx)("div",{className:"flex flex-col",children:_.length>0?_.map((function(e){return Object(u.jsxs)(j.b,{className:"margin-row-small text-bigger bm-item menu-item flex flex-row",to:e,children:[Object(u.jsx)("div",{className:"min-margin-right",children:Object(u.jsx)(C.a,{className:"btn-icon"})}),Object(u.jsx)("div",{children:e})]})})):null})]})})}var D=n(90),A=n.n(D),I=n(134),T=n.n(I),E=n(133),F=n.n(E);function M(e){var t=e.daoData,n=e.loaded,a=Object(p.h)().dao,c=Object(i.useState)(""),r=Object(b.a)(c,2),s=r[0],o=r[1],l=Object(i.useState)(""),d=Object(b.a)(l,2),m=d[0],h=d[1],x=Object(i.useState)(""),O=Object(b.a)(x,2),f=O[0],g=O[1],v=Object(i.useState)(""),w=Object(b.a)(v,2),N=w[0],_=w[1];return Object(i.useEffect)((function(){t.jobs&&(g(t.jobs.length),h(5),_(1),o(t.jobs.map((function(e){return e.contracted})).concat(t.jobs.map((function(e){return e.applicants})).reduce((function(e,t){return e.concat(t)}),[]).map((function(e){return e.applicant}))).filter((function(e,t,n){return n.indexOf(e)===t&&e})).length+1))}),[t]),n?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("header",{children:Object(u.jsxs)("div",{className:"flex flex-row flex-left items-center",children:[Object(u.jsxs)("h1",{className:"mr-4",children:[t.name," Dashboard"]}),t.icon?Object(u.jsx)("img",{src:t.icon,alt:"DAO icon",className:"dao-icon"}):null]})}),Object(u.jsxs)("div",{className:"flex flex-row justify-between",children:[Object(u.jsx)(j.b,{className:"bm-item menu-item flex-grow medium-margin-right",to:"members",children:Object(u.jsx)("div",{className:"card card-stats",children:Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col s5 text-center",children:[Object(u.jsx)(F.a,{className:"icon-big"}),Object(u.jsx)("p",{className:"small",children:"Members"})]}),Object(u.jsx)("div",{className:"col s7 numbers",children:Object(u.jsx)("h5",{children:s})})]})})})}),Object(u.jsx)(j.b,{className:"bm-item menu-item flex-grow medium-margin-right",to:"tasks",children:Object(u.jsx)("div",{className:"card card-stats",children:Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col s5 text-center",children:[Object(u.jsx)(T.a,{className:"icon-big"}),Object(u.jsx)("p",{className:"small",children:"Tasks"})]}),Object(u.jsx)("div",{className:"col s7 numbers",children:Object(u.jsx)("h5",{children:m})})]})})})}),Object(u.jsx)(j.b,{className:"bm-item menu-item flex-grow medium-margin-right",to:"jobs",children:Object(u.jsx)("div",{className:"card card-stats",children:Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col s5 text-center",children:[Object(u.jsx)(A.a,{className:"icon-big"}),Object(u.jsx)("p",{className:"small",children:"Jobs"})]}),Object(u.jsx)("div",{className:"col s7 numbers",children:Object(u.jsx)("h5",{children:f})})]})})})}),Object(u.jsx)(j.b,{className:"bm-item menu-item flex-grow",to:"governance",children:Object(u.jsx)("div",{className:"card card-stats",children:Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col s5 text-center",children:[Object(u.jsx)(A.a,{className:"icon-big"}),Object(u.jsx)("p",{className:"small",children:"Open Proposals"})]}),Object(u.jsx)("div",{className:"col s7 numbers",children:Object(u.jsx)("h5",{children:N})})]})})})})]}),Object(u.jsx)("p",{className:"bigger-font preserve-newline",children:t.description})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("header",{children:Object(u.jsxs)("h1",{children:[a," Dashboard"]})}),Object(u.jsx)("p",{children:"Loading..."})]})}function U(e){var t=e.onJobCreation;return Object(u.jsx)("form",{onSubmit:t,children:Object(u.jsxs)("fieldset",{id:"fieldset",className:"flex flex-col details-view flex-grow",children:[Object(u.jsxs)("div",{className:"highlight flex flex-col",children:[Object(u.jsx)("h5",{children:"Create a new job offering"}),Object(u.jsx)("p",{children:"Add all required parameter for the new job and hit the 'Create' button."}),Object(u.jsx)(m.TextInput,{autoComplete:"off",autoFocus:!0,id:"name_prompt",label:"The name of the job.",required:!0}),Object(u.jsx)(m.Textarea,{id:"description_prompt",label:"A detailed description of the job.",required:!0}),Object(u.jsx)(m.TextInput,{autoComplete:"off",id:"payment_prompt",defaultValue:"1",min:"0",step:"1",type:"number",label:"The payment for the job in \u24c3.",required:!0}),Object(u.jsx)(m.TextInput,{autoComplete:"off",id:"duration_prompt",defaultValue:"172800",min:"1",step:"1",type:"number",label:"The duration for the job offer in s.",required:!0})]}),Object(u.jsx)(m.Button,{type:"submit",small:!0,tooltip:"Creates the job and deposits the chosen payment.",children:"Create"})]})})}var R=function(e){var t=e.daoData,n=e.loaded,a=e.currentUser,c=e.onJobCreation,r=Object(p.h)().dao,s=Object(i.useState)([]),o=Object(b.a)(s,2),l=o[0],d=o[1],m=Object(i.useState)([]),h=Object(b.a)(m,2),x=h[0],O=h[1],f=Object(i.useState)([]),g=Object(b.a)(f,2),v=g[0],w=g[1];Object(i.useEffect)((function(){t.jobs&&(d(N(t.jobs.filter((function(e){return"Open"===e.state})),3)),O(N(t.jobs.filter((function(e){return"InProgress"===e.state})),3)),w(N(t.jobs.filter((function(e){return"Canceled"===e.state})),3)))}),[t]);var N=function(e,t){for(var n=[],a=0,c=e.length;a<c;)n.push(e.slice(a,a+=t));return n};return n?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("header",{children:Object(u.jsxs)("h1",{children:[t.name,"'s Jobs Board"]})}),Object(u.jsx)("h5",{children:"Open Jobs"}),l.length>0?l.map((function(e){return Object(u.jsx)("div",{className:"row",children:e.map((function(e){return Object(u.jsx)("div",{className:"col s4",children:Object(u.jsx)(j.b,{className:"bm-item menu-item",to:e.id,children:Object(u.jsxs)("div",{className:"card",children:[Object(u.jsx)("div",{className:"card-title",children:e.name}),Object(u.jsx)("div",{className:"card-content",children:Object(u.jsx)("p",{className:"preserve-newline",children:e.description})})]})})})}))})})):Object(u.jsx)("p",{className:"mb-8",children:"Currently there are no open jobs available."}),Object(u.jsx)("h5",{children:"Active Jobs"}),x.length>0?x.map((function(e){return Object(u.jsx)("div",{className:"row",children:e.map((function(e){return Object(u.jsx)("div",{className:"col s4",children:Object(u.jsx)(j.b,{className:"bm-item menu-item",to:e.id,children:Object(u.jsxs)("div",{className:"card",children:[Object(u.jsx)("div",{className:"card-title",children:e.name}),Object(u.jsx)("div",{className:"card-content",children:Object(u.jsx)("p",{className:"preserve-newline",children:e.description})})]})})})}))})})):Object(u.jsx)("p",{className:"mb-8",children:"Currently there are no active jobs."}),Object(u.jsx)("h5",{children:"Canceled Jobs"}),v.length>0?v.map((function(e){return Object(u.jsx)("div",{className:"row",children:e.map((function(e){return Object(u.jsx)("div",{className:"col s4",children:Object(u.jsx)(j.b,{className:"bm-item menu-item",to:e.id,children:Object(u.jsxs)("div",{className:"card",children:[Object(u.jsx)("div",{className:"card-title",children:e.name}),Object(u.jsx)("div",{className:"card-content",children:Object(u.jsx)("p",{className:"preserve-newline",children:e.description})})]})})})}))})})):Object(u.jsx)("p",{className:"mb-8",children:"Currently there are no canceled jobs."}),r===a.accountId?Object(u.jsx)(U,{onJobCreation:c}):null]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("header",{children:Object(u.jsxs)("h1",{children:[r,"'s Jobs Board"]})}),Object(u.jsx)("h1",{children:"Loading..."})]})},P=n(39),B=n.n(P),L=function(e){var t=e.jobData,n=e.onCancelJob,a=e.onStartJob,c=e.stream,r=Object(i.useState)(),s=Object(b.a)(r,2),o=s[0],l=s[1],d=Object(p.g)();if(!t)return null;switch(t.state){case"InProgress":return c&&"Active"!==c.status?null:Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(m.Button,{large:!0,tooltip:"Canceles the payment an the job offering. Important: A new job has to be created afterwards.",onClick:function(){return n(t.payment_stream_id)},children:"Cancel Contract"})});case"Open":return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"flex flex-col flex-grow medium-margin-right",children:Object(u.jsx)(m.TextInput,{autoComplete:"off",label:"NEAR account id of the contracted.",onChange:function(e){l(e.target.value)}})}),Object(u.jsx)(m.Button,{large:!0,tooltip:"Assigns the contracted and starts the job immediately.",onClick:function(){return a(t.id,o)},className:o?"medium-margin-right":"medium-margin-right disabled",children:"Assign Contracted And Start"}),Object(u.jsx)(m.Button,{large:!0,onClick:function(){d("applications")},children:"View Applications"})]});default:return null}},J=function(e){var t=e.currentUser,n=e.roketoContract,a=e.onEnablePayment,r=e.stream,o=e.onReceivePayment,l=e.jobId,d=Object(i.useState)(),j=Object(b.a)(d,2),h=j[0],p=j[1];return Object(i.useEffect)((function(){function e(){return(e=Object(c.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get_account({account_id:t.accountId});case 2:a=e.sent,console.log(a),p(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,n]),h?h.is_cron_allowed?r&&"Active"===r.status?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(m.Button,{large:!0,tooltip:"Receives the available payment.",onClick:function(){return o(l)},children:"Receive Payment"})}):null:Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(m.Button,{large:!0,tooltip:"Enables the payment for the job and all other jobs in the future.",onClick:a,children:"Enable Payment"})}):null};function V(e){var t=e.onApplyForJob,n=e.jobId;return Object(u.jsx)("form",{onSubmit:t,children:Object(u.jsxs)("fieldset",{id:"fieldset",className:"flex flex-col details-view flex-grow",children:[Object(u.jsxs)("div",{className:"highlight flex flex-col",children:[Object(u.jsx)("h5",{children:"Apply for the job"}),Object(u.jsx)("p",{children:"Write your most inspiring application down below."}),Object(u.jsx)(m.TextInput,{autoComplete:"off",id:"job_id",label:"The job ID. Do not change it!",required:!0,inputClassName:"disabled",value:n}),Object(u.jsx)(m.Textarea,{autoFocus:!0,id:"application_prompt",label:"Here is the space for your amazing application.",required:!0})]}),Object(u.jsx)(m.Button,{type:"submit",small:!0,tooltip:"Applies for the job. In order to change your application simply fill the form again.",children:"Apply"})]})})}var H=n(5),W=n.n(H),q=n(14),z=["tokenName","className"],Y=function(e){return Object(u.jsx)("svg",Object(a.a)(Object(a.a)({version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"20pt",height:"20pt",viewBox:"0 0 864.000000 864.000000",preserveAspectRatio:"xMidYMid meet"},e),{},{children:Object(u.jsx)("g",{transform:"translate(0.000000,864.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:Object(u.jsx)("path",{d:"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z"})})}))},K=function(e){return Object(u.jsx)("svg",Object(a.a)(Object(a.a)({version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"20pt",height:"20pt",viewBox:"0 0 864.000000 864.000000",preserveAspectRatio:"xMidYMid meet"},e),{},{children:Object(u.jsx)("g",{transform:"translate(0.000000,864.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:Object(u.jsx)("path",{d:"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z"})})}))};function G(e){var t=e.tokenName,n=e.className,c=Object(q.a)(e,z),r={NEAR:Y,fallback:K},s=r[t]||r.fallback;return Object(u.jsx)(s,Object(a.a)({className:n},c))}var X=["tokenName","size","className"];function Q(e){var t=e.tokenName,n=e.size,c=void 0===n?8:n,r=e.className,s=Object(q.a)(e,X);return Object(u.jsx)("div",Object(a.a)(Object(a.a)({className:W()("p-1 flex-shrink-0 rounded-lg bg-card2 inline-flex items-center justify-center","w-".concat(c," h-").concat(c),r)},s),{},{children:Object(u.jsx)(G,{className:"w-full h-full",tokenName:t})}))}n(27);var Z=n(54),$=["progresses","className"],ee=[["#4743FB","#C750FF"],["#FFCC69","#FF8469"]];"linear-gradient(270deg, ".concat(ee[0][0]," 0%, ").concat(ee[0][1]," 100%)"),"linear-gradient(270deg, ".concat(ee[1][0]," 0%, ").concat(ee[1][1]," 100%)");function te(e){var t=e.endColor,n=e.startColor,a=e.progressValue,c=e.idCSS,r=e.rotation,s="rotate(".concat(r,")");return Object(u.jsx)("svg",{style:{height:0},children:Object(u.jsx)("defs",{children:Object(u.jsxs)("linearGradient",{id:c,gradientTransform:s,children:[Object(u.jsx)("stop",{offset:"0%",stopColor:n}),a>0&&a<100?Object(u.jsx)("stop",{offset:"".concat(a,'%"'),stopColor:t}):null,Object(u.jsx)("stop",{offset:"100%",stopColor:t})]})})})}function ne(e){var t=e.progresses,n=e.className,c=Object(q.a)(e,$);t.sort((function(e,t){return t-e}));return Object(u.jsx)("div",Object(a.a)(Object(a.a)({className:W()(n)},c),{},{children:Object(u.jsxs)(Z.b,{circleRatio:.5,styles:Object(Z.c)({rotation:.75,pathColor:"#0D0B26",strokeLinecap:"round"}),value:1,minValue:0,maxValue:1,children:[ee.map((function(e,t){return Object(u.jsx)(te,{idCSS:"__arcProgressBar_grad_".concat(t),rotation:90,startColor:e[0],endColor:e[1]})})),t.map((function(e,t){return Object(u.jsx)(Z.a,{circleRatio:.5,className:"absolute inset-0",value:e,styles:Object(Z.c)({rotation:.75,trailColor:"transparent",pathColor:"url(#__arcProgressBar_grad_".concat(t,")"),strokeLinecap:"round"}),minValue:0,maxValue:1})}))]})}))}n(211);var ae=n(141),ce=["children","html","overlay"];function re(e){var t=e.children,n=e.html,c=e.overlay,r=Object(q.a)(e,ce);return Object(u.jsx)(ae.a,Object(a.a)(Object(a.a)({placement:"top",overlay:n?Object(u.jsx)("div",{dangerouslySetInnerHTML:{__html:n}}):c},r),{},{children:t||Object(u.jsx)("span",{className:"Tooltip__defaultIcon",children:"?"})}))}var se=n(8),ie=n(25),oe=n.n(ie),le={"wrap.testnet":{name:"Near",decimals:24,address:"wrap.testnet",is_mainnet:!0,is_testnet:!0},TARAS:{name:"Taras",decimals:18,address:"dev-1630798753809-34755859843881",is_mainnet:!1,is_testnet:!0},XYI:{name:"XYI",decimals:18,address:"xyi.tkn.near",is_mainnet:!0,is_testnet:!1},fallback:{name:null,decimals:18,address:null,is_mainnet:!1,is_testnet:!1}};function de(e){var t=le[e]||le.fallback,n=Math.pow(10,6),a=Math.pow(10,9),c=60*a,r=60*c,s=24*r,i=7*s,o=4*i,l=12*o,d=Math.pow(10,t.decimals),j=Intl.NumberFormat("en-US",{minimumIntegerDigits:1,maximumFractionDigits:2,minimumFractionDigits:2}),b=Intl.NumberFormat("en-US",{minimumSignificantDigits:2,maximumSignificantDigits:4,maximumFractionDigits:t.decimals}),m=function(e){return e<1?b.format(e):e<1e6?j.format(e):oe()(e).format({mantissa:3,trimMantissa:!0,optionalMantissa:!0,average:!0})};return{tokenPerSecondToInt:function(e){return oe()(e).multiply(d).divide(a).format({mantissa:0})},toInt:function(e){return oe()(e).multiply(d).format({mantissa:0})},amount:function(e){arguments.length>1&&void 0!==arguments[1]||t.decimals;var n=oe()(e).divide(d).value(),a=m(n);return a},tokensPerMS:function(e){var t=oe()(e).multiply(n).divide(d);return m(t)},tokensPerS:function(e){var t=oe()(e).multiply(a).divide(d).value();return m(t)},token_name:t.name,tokensPerMeaningfulPeriod:function(e){var t,n=[a,c,r,s,i,o,l],j=(t={},Object(se.a)(t,a,"second"),Object(se.a)(t,c,"minute"),Object(se.a)(t,r,"hour"),Object(se.a)(t,s,"day"),Object(se.a)(t,i,"week"),Object(se.a)(t,o,"month"),Object(se.a)(t,l,"year"),t),b=n.find((function(t){return oe()(e).multiply(t).divide(d).value()>.01}))||l,u=oe()(e).multiply(b).divide(d).value();return{formattedValue:m(u),unit:j[b]}},ticksToMs:function(e){return Math.round(e/n)},ticksToS:function(e){return Math.round(e/a)},secondsToTicks:function(e){return e*a},speedPerSecondToTick:function(e){return oe()(e).multiply(a).value()}}}window.tf=de;var je="FINISHED",be="INTERRUPTED";function me(e){var t=de(e.token_account_id),n="".concat(window.location.origin,"/#/my_streams/").concat(e.stream_id),a=Number(e.balance)+Number(e.tokens_total_withdrawn),c=e.timestamp_created+t.secondsToTicks(a/e.tokens_per_sec);c=new Date(c/1e6);var r=Math.min(Number(e.tokens_per_sec)*t.ticksToS(1e6*Date.now()-e.last_action),Number(e.balance)),s=c.getTime(),i=Number(e.tokens_total_withdrawn),o=Number(e.tokens_total_withdrawn)+r,l=r,d=a-o,j={left:(a-o)/a,streamed:o/a,withdrawn:i/a,available:l/a};return{dateEnd:c,progresses:[i/a,o/a],tf:t,isDead:e.status===je||e.status===be,percentages:j,link:n,timestampEnd:s,progress:{full:a,withdrawn:i,streamed:o,left:d,available:l}}}var ue=function(){return Object(u.jsxs)("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(u.jsx)("path",{d:"M0.999991 1.84371L8.23523 9.07889M8.23523 9.07889V1.84371M8.23523 9.07889H1.00004",stroke:"#2EDDD9",strokeWidth:"2",strokeLinecap:"round"}),Object(u.jsx)("path",{d:"M12.1637 6.27124C13.5911 7.14289 14.5438 8.71524 14.5438 10.5101C14.5438 13.2512 12.3218 15.4733 9.58068 15.4733C7.7858 15.4733 6.21344 14.5205 5.3418 13.0931",stroke:"#2EDDD9",strokeWidth:"2",strokeLinecap:"round"})]})},he=function(){return Object(u.jsxs)("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(u.jsx)("path",{d:"M8.23528 9.07894L1 1.8437M1 1.8437V9.07894M1 1.8437H8.23523",stroke:"#F56173",strokeWidth:"2",strokeLinecap:"round"}),Object(u.jsx)("path",{d:"M12.1637 6.27117C13.591 7.14282 14.5438 8.71519 14.5438 10.5101C14.5438 13.2512 12.3217 15.4733 9.58065 15.4733C7.78575 15.4733 6.21339 14.5205 5.34174 13.0931",stroke:"#F56173",strokeWidth:"2",strokeLinecap:"round"})]})},pe=["stream","direction","className"];function xe(e){var t=e.stream,n=e.direction,c=e.className,r=Object(q.a)(e,pe),s=me(t).tf,i=s.tokensPerMeaningfulPeriod(t.tokens_per_sec/Math.pow(10,9));return Object(u.jsxs)("div",Object(a.a)(Object(a.a)({className:W()("inline-flex items-center whitespace-nowrap",c)},r),{},{children:["out"===n?Object(u.jsx)(he,{}):"in"===n?Object(u.jsx)(ue,{}):"",Object(u.jsxs)("span",{className:"ml-2",children:[Object(u.jsxs)("span",{children:["@",i.formattedValue]}),Object(u.jsxs)("span",{children:[" ",s.token_name," / ",i.unit]})]})]}))}var Oe=["className"];function fe(e){var t=e.className,n=Object(q.a)(e,Oe);return Object(u.jsx)("div",Object(a.a)({className:W()("inline-block w-2 h-2 flex-shrink-9 rounded-full",t)},n))}var ge=["label","formattedFloatValue","percentageValue","colorClass","className"];function ve(e){var t=e.label,n=e.formattedFloatValue,c=e.percentageValue,r=e.colorClass,s=e.className,i=Object(q.a)(e,ge);return Object(u.jsxs)("div",Object(a.a)(Object(a.a)({className:s},i),{},{children:[Object(u.jsx)(fe,{className:W()(r,"mr-1")}),Object(u.jsxs)("span",{children:[t,":"," ",Object(u.jsxs)("span",{className:"font-semibold",children:[n," "]}),Object(u.jsxs)("span",{className:"text-gray",children:[" ","(",oe()(c).format({output:"percent",mantissa:1}),")"]})]})]}))}function we(e){var t=e.stream,n=e.account,a=me(t),c=a.tf,r=a.progresses,s=a.percentages,i=a.dateEnd,o=a.progress,l=o.full,d=o.withdrawn,j=o.streamed,b=o.available,m=o.left,h=function(e){var t=e.stream,n=e.account;return n?t.owner_id===n.accountId?"out":t.receiver_id===n.accountId?"in":"":""}({stream:t,account:n});return Object(u.jsxs)("div",{className:W()("flex","flex-col","items-center"),children:[Object(u.jsx)("h5",{className:"mb-8",children:"Payment Details"}),Object(u.jsxs)("div",{className:"-mb-32",children:[Object(u.jsx)(re,{align:{offset:[0,-20]},offset:{top:20},overlayStyle:{"background-color":"#1f1d37"},overlay:Object(u.jsxs)("div",{className:"text-left",children:[Object(u.jsx)(ve,{className:"whitespace-nowrap mb-2",label:"Withdrawn",colorClass:"bg-streams-withdrawn",formattedFloatValue:c.amount(d)+" "+c.token_name,percentageValue:s.withdrawn}),Object(u.jsx)(ve,{className:"whitespace-nowrap",label:"Streamed",colorClass:"bg-streams-streamed",formattedFloatValue:c.amount(j)+" "+c.token_name,percentageValue:s.streamed})]}),children:Object(u.jsx)(ne,{className:"w-96 h-48",progresses:r})}),Object(u.jsxs)("div",{className:"flex justify-between pt-5 -mx-2 text-gray",children:[Object(u.jsx)("div",{className:"w-10 text-center",children:" 0%"}),Object(u.jsx)("div",{className:"w-10 text-center",children:" 100%"})]})]}),Object(u.jsx)(Q,{size:14,tokenName:c.token_name,className:"mb-8"}),Object(u.jsx)("div",{className:"text-6xl font-semibold",children:c.amount(j)}),Object(u.jsxs)("div",{className:"text-gray font-semibold",children:["of ",c.amount(l)," ",c.token_name]}),Object(u.jsx)(xe,{stream:t,direction:h,className:"mt-6 mb-6"}),Object(u.jsxs)("div",{className:"flex flex-grow justify-between margin-row-small",children:[Object(u.jsx)("div",{className:"text-unimportant min-margin-right",children:"Available to receive:"}),Object(u.jsxs)("div",{children:[c.amount(b)," ",c.token_name]})]}),Object(u.jsxs)("div",{className:"flex flex-grow justify-between margin-row-small",children:[Object(u.jsx)("div",{className:"text-unimportant min-margin-right",children:"Locked amount:"}),Object(u.jsxs)("div",{children:[c.amount(m)," ",c.token_name]})]}),Object(u.jsxs)("div",{className:"flex flex-grow justify-between margin-row-small",children:[Object(u.jsx)("div",{className:"text-unimportant min-margin-right",children:"Fully unlocked:"}),Object(u.jsx)("div",{children:i.toLocaleString()})]})]})}var Ne=function(e){var t=e.daoData,n=e.currentUser,a=e.onCancelJob,r=e.onStartJob,o=e.onApplyForJob,l=e.roketoContract,d=e.onEnablePayment,j=e.onReceivePayment,h=e.wrapContract,x=e.onUnwrap,O=Object(p.h)(),f=O.dao,g=O.job,v=Object(i.useState)(),w=Object(b.a)(v,2),N=w[0],_=w[1],y=Object(i.useState)(),k=Object(b.a)(y,2),C=k[0],S=k[1],D=Object(i.useState)(),A=Object(b.a)(D,2),I=A[0],T=A[1],E=Object(i.useState)(),F=Object(b.a)(E,2),M=F[0],U=F[1],R=Object(i.useState)(!1),P=Object(b.a)(R,2),H=P[0],W=P[1];Object(i.useEffect)((function(){function e(){return(e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.ft_balance_of({account_id:n.accountId});case 2:t=e.sent,console.log(t),t&&W(parseInt(t)>0);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,h]),Object(i.useEffect)((function(){if(t.jobs){var e=t.jobs.find((function(e){return e.id===g})),n=parseInt(e.payment_cycle_in_s),a=n%60,c=Math.floor(n%3600/60),r=Math.floor(n%86400/3600),s=Math.floor(n/86400);n="",s&&(n+=" "+s+"d"),r&&(n+=" "+r+"h"),c&&(n+=" "+c+"m"),a&&(n+=" "+a+"s"),e.duration=n,_(e),S(B()(e.payment).div(Math.pow(10,24)).toFixed(2))}}),[t,g]);var q=function(e){return new Promise((function(t){return setTimeout(t,e)}))};return Object(i.useEffect)((function(){function e(){return(e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N&&N.payment_stream_id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,l.get_stream({stream_id:N.payment_stream_id});case 4:return t=e.sent,console.log(t),e.next=8,q(1e3);case 8:T(t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[N,I,l]),Object(i.useEffect)((function(){if(N&&I)if("InProgress"===N.state)"Active"===I.status?U("Running"):U("Completed/Cancelled");else U(N.state)}),[N,I]),N?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("header",{children:Object(u.jsxs)("h1",{children:[N.name,"'s Details"]})}),Object(u.jsxs)("div",{className:"flex flex-row-wrap margin-row-small",children:[H?Object(u.jsx)(m.Button,{large:!0,tooltip:"You have wrapped NEAR. This function will unwrap all wrapped near.",onClick:x,className:"medium-margin-right",children:"Unwrap NEAR"}):null,n.accountId===f?Object(u.jsx)(L,{jobData:N,onCancelJob:a,onStartJob:r,stream:I}):N&&N.contracted===n.accountId?Object(u.jsx)(J,{currentUser:n,roketoContract:l,onEnablePayment:d,stream:I,onReceivePayment:j,jobId:N.id}):null]}),Object(u.jsxs)("div",{className:"flex flex-row-wrap justify-between",children:[Object(u.jsxs)("div",{className:"details-view flex flex-col flex-grow medium-margin-right",children:[Object(u.jsx)("div",{className:"margin-row-small text-bigger preserve-newline",children:N.description}),Object(u.jsxs)("div",{className:"flex justify-between margin-row-small",children:[Object(u.jsx)("div",{className:"text-unimportant min-margin-right",children:"Status:"}),Object(u.jsx)("div",{children:M})]}),Object(u.jsxs)("div",{className:"flex justify-between margin-row-small",children:[Object(u.jsx)("div",{className:"text-unimportant min-margin-right",children:"Total Payment:"}),Object(u.jsxs)("div",{children:[C," \u24c3"]})]}),Object(u.jsxs)("div",{className:"flex justify-between margin-row-small",children:[Object(u.jsx)("div",{className:"text-unimportant min-margin-right",children:"Contract Duration:"}),Object(u.jsx)("div",{children:N.duration})]}),Object(u.jsxs)("div",{className:"flex justify-between margin-row-small",children:[Object(u.jsx)("div",{className:"text-unimportant min-margin-right",children:"Applications:"}),Object(u.jsx)("div",{children:N.applicants.length})]}),Object(u.jsxs)("div",{className:"flex justify-between margin-row-small",children:[Object(u.jsx)("div",{className:"text-unimportant min-margin-right",children:"Contracted:"}),Object(u.jsx)("div",{children:N.contracted})]})]}),I?Object(u.jsx)("div",{className:"details-view",children:Object(u.jsx)(we,{stream:I,account:n})}):null]}),f!==n.accountId&&"Open"===N.state?Object(u.jsx)("div",{className:"margin-row-big",children:Object(u.jsx)(V,{onApplyForJob:o,jobId:N.id})}):null]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("header",{children:Object(u.jsxs)("h1",{children:[g,"'s Details"]})}),Object(u.jsx)("h1",{children:"Loading..."})]})},_e=function(e){var t=e.daoData,n=Object(p.h)().dao,a=Object(i.useState)(),c=Object(b.a)(a,2),r=c[0],s=c[1];Object(i.useEffect)((function(){if(t.jobs){var e=t.jobs.map((function(e){return e.contracted})).concat(t.jobs.map((function(e){return e.applicants})).reduce((function(e,t){return e.concat(t)}),[]).map((function(e){return e.applicant}))).filter((function(e,t,n){return n.indexOf(e)===t&&e}));s(o(e,3))}}),[t]);var o=function(e,t){for(var n=[],a=0,c=e.length;a<c;)n.push(e.slice(a,a+=t));return n};return r?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("header",{children:Object(u.jsxs)("h1",{children:[t.name,"'s Members"]})}),Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col s4",children:Object(u.jsxs)("div",{className:"card",children:[Object(u.jsx)("div",{className:"card-title flex flex-row",children:Object(u.jsx)("div",{className:"min-margin-right",children:n})}),Object(u.jsx)("div",{className:"card-content",children:Object(u.jsxs)("div",{className:"flex justify-between margin-row-small",children:[Object(u.jsx)("div",{className:"text-unimportant min-margin-right",children:"Role:"}),Object(u.jsx)("div",{children:"Admin"})]})})]})})}),r.length>0?r.map((function(e){return Object(u.jsx)("div",{className:"row",children:e.map((function(e){return Object(u.jsx)("div",{className:"col s4",children:Object(u.jsxs)("div",{className:"card",children:[Object(u.jsx)("div",{className:"card-title flex flex-row",children:Object(u.jsx)("div",{className:"min-margin-right",children:e})}),Object(u.jsx)("div",{className:"card-content",children:Object(u.jsxs)("div",{className:"flex justify-between margin-row-small",children:[Object(u.jsx)("div",{className:"text-unimportant min-margin-right",children:"Role:"}),Object(u.jsx)("div",{children:"User"})]})})]})})}))})})):Object(u.jsx)("p",{children:"Currently there are no members in this DAO active."})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("header",{children:Object(u.jsxs)("h1",{children:[n,"'s Members"]})}),Object(u.jsx)("h1",{children:"Loading..."})]})},ye=n(72),ke=function(e){var t=e.daoData,n=e.loaded,a=Object(p.h)().dao;return n?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("header",{children:Object(u.jsxs)("h1",{children:[t.name,"'s Tasks Board"]})}),Object(u.jsx)("div",{children:Object(u.jsx)(ye.a,{url:"https://trello.com/b/Ywm3W9HB.html",position:"relative",overflow:"hidden",className:"mockup-iframe"})})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("header",{children:Object(u.jsxs)("h1",{children:[a," Dashboard"]})}),Object(u.jsx)("p",{children:"Loading..."})]})},Ce=n(139),Se=n.n(Ce),De=n(138),Ae=n.n(De),Ie=function(e){var t=e.daoData,n=Object(p.h)().job,a=Object(i.useState)(),r=Object(b.a)(a,2),o=r[0],l=r[1],d=Object(i.useState)(),j=Object(b.a)(d,2),h=j[0],x=j[1],O=Object(p.g)();Object(i.useEffect)((function(){if(t.jobs){var e=t.jobs.find((function(e){return e.id===n}));l(f(e.applicants,2)),x(e.name)}}),[t,n]);var f=function(e,t){for(var n=[],a=0,c=e.length;a<c;)n.push(e.slice(a,a+=t));return n},g=function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("header",{children:Object(u.jsxs)("h1",{children:[h,"'s Applications"]})}),Object(u.jsx)("div",{className:"flex flex-row-wrap justify-between margin-row-small",children:Object(u.jsx)(m.Button,{large:!0,onClick:function(){O(-1)},children:Object(u.jsxs)("div",{className:"flex flex-row",children:[Object(u.jsx)("div",{className:"min-margin-right",children:Object(u.jsx)(Ae.a,{className:"btn-icon"})}),Object(u.jsx)("div",{children:"Back"})]})})}),o.length>0?o.map((function(e){return Object(u.jsx)("div",{className:"row",children:e.map((function(e){return Object(u.jsx)("div",{className:"col s6",children:Object(u.jsxs)("div",{className:"card",children:[Object(u.jsxs)("div",{className:"card-title flex flex-row",children:[Object(u.jsx)("div",{className:"min-margin-right",children:e.applicant}),Object(u.jsx)("div",{className:"bm-item menu-item",onClick:function(){return g(e.applicant)},children:Object(u.jsx)(Se.a,{className:"btn-icon"})})]}),Object(u.jsx)("div",{className:"card-content",children:Object(u.jsx)("p",{className:"preserve-newline",children:e.application})})]})})}))})})):Object(u.jsx)("p",{children:"Currently there are no applications for the job. Come back later."})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("header",{children:Object(u.jsxs)("h1",{children:[n,"'s Applications"]})}),Object(u.jsx)("h1",{children:"Loading..."})]})},Te=function(e){var t=e.daoData,n=e.loaded,a=Object(p.h)().dao;return n?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("header",{children:Object(u.jsxs)("h1",{children:[t.name," Governance"]})}),Object(u.jsx)("div",{children:Object(u.jsx)(ye.a,{url:"https://snapshot.org/#/sushigov.eth",position:"relative",overflow:"hidden",className:"mockup-iframe"})})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("header",{children:Object(u.jsxs)("h1",{children:[a," Governance"]})}),Object(u.jsx)("p",{children:"Loading..."})]})},Ee=n(35),Fe=n(36),Me=n(38),Ue=n(37),Re=n.p+"static/media/404.6fa35088.jpg",Pe=function(e){Object(Me.a)(n,e);var t=Object(Ue.a)(n);function n(){return Object(Ee.a)(this,n),t.apply(this,arguments)}return Object(Fe.a)(n,[{key:"render",value:function(){return Object(u.jsx)("img",{src:Re,alt:"Nothing is here.",width:"900",style:{margin:"10em"}})}}]),n}(o.a.Component),Be=Pe,Le=(n(280),n(281),n(282).version);n(283);var Je=B()(3).times(Math.pow(10,14)).toFixed(),Ve=function(e){var t=e.contract,n=e.currentUser,a=e.nearConfig,r=e.wallet,o=e.provider,l=e.lastTransaction,d=e.error,j=e.roketoContract,m=e.wrapContract,x=Object(i.useState)(""),O=Object(b.a)(x,2),f=O[0],g=O[1],v=Object(i.useState)(""),N=Object(b.a)(v,2),y=N[0],k=N[1],C=Object(i.useState)([]),D=Object(b.a)(C,2),A=D[0],I=D[1],T=Object(i.useState)(!1),E=Object(b.a)(T,2),F=E[0],U=E[1];Object(i.useEffect)((function(){function e(){return e=Object(c.a)(s.a.mark((function e(t,n){var a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.txStatus(t,n);case 2:a=e.sent,(c=a.receipts_outcome[0].outcome.logs.pop())||(c=a.receipts_outcome[3].outcome.logs.pop()),c||(c=a.receipts_outcome[a.receipts_outcome.length-3].outcome.logs.pop()),c||"stop_stream"!==a.transaction.actions[0].FunctionCall.method_name||(c="Executed payment stream cancellation method."),c&&g(c);case 8:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}d?(g(decodeURI(d)),window.history.pushState({},"",window.location.origin+window.location.pathname+window.location.hash)):l&&n&&(!function(t,n){e.apply(this,arguments)}(l,n.accountId),window.history.pushState({},"",window.location.origin+window.location.pathname+window.location.hash))}),[l,d,n,o]),Object(i.useEffect)((function(){function e(){return(e=Object(c.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.get_dao({dao_owner:y});case 4:n=e.sent,console.log(n),I(n),U(!0);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,n,y]);var P=function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ft_balance_of({account_id:n.accountId});case 2:return t=e.sent,e.next=5,m.near_withdraw({amount:t},Je,1);case 5:console.log("Successfully unwrapped.");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){r.requestSignIn({contractId:a.contractName,methodNames:[t.cancel_job.name,t.start_job.name,t.create_job_offering.name,t.apply_for_job.name]},"NEAR Challenge #8 - DAO Dashboard",null,null)};return n?Object(u.jsx)(p.d,{children:Object(u.jsxs)(p.b,{path:"/",element:Object(u.jsx)(w,{currentUser:n,signIn:L,signOut:function(){r.signOut(),window.location.reload(!1)},clearMessage:function(){g("")},message:f}),children:[Object(u.jsx)(p.b,{index:!0,element:Object(u.jsx)(S,{version:Le,currentUser:n,contract:t,onDaoCreation:function(e){var a;e.preventDefault();var c=e.target.elements,r=c.fieldset,s=c.name_prompt,i=c.description_prompt,o=c.icon_prompt;r.disabled=!0,t.create_dao({dao_owner_id:n.accountId,name:s.value,description:i.value,icon:null!==(a=o.value)&&void 0!==a?a:""},Je,B()("1").times(Math.pow(10,25)).toFixed())}})}),Object(u.jsxs)(p.b,{path:":dao",element:Object(u.jsx)(_,{setDao:k}),children:[Object(u.jsx)(p.b,{index:!0,element:Object(u.jsx)(M,{daoData:A,loaded:F})}),Object(u.jsxs)(p.b,{path:"jobs",children:[Object(u.jsx)(p.b,{index:!0,element:Object(u.jsx)(R,{daoData:A,loaded:F,onJobCreation:function(e){e.preventDefault();var n=e.target.elements,a=n.fieldset,c=n.name_prompt,r=n.description_prompt,s=n.payment_prompt,i=n.duration_prompt,o=B()(s.value).times(Math.pow(10,24)).toFixed();a.disabled=!0,t.create_job_offering({name:c.value,description:r.value,payment:o,payment_cycle_in_s:i.value},Je,o).then((function(e){console.log("Successfully created job.")}))},currentUser:n})}),Object(u.jsx)(p.b,{path:":job",element:Object(u.jsx)(Ne,{daoData:A,currentUser:n,onCancelJob:function(e){j.stop_stream({stream_id:e},Je,1).then((function(e){console.log("Successfully canceled.")}))},onStartJob:function(e,n){t.start_job({job_id:e,contracted:n},Je,B()("1").times(Math.pow(10,22)).toFixed()).then((function(e){console.log("Successfully started.")}))},onApplyForJob:function(e){e.preventDefault();var n=e.target.elements,a=n.fieldset,c=n.job_id,r=n.application_prompt;a.disabled=!0,t.apply_for_job({dao_owner:y,job_id:c.value,application:r.value},Je,0).then((function(e){a.disabled=!1,r.value="",r.focus(),g("Successfully applied for the job.")}))},roketoContract:j,onEnablePayment:function(){j.account_update_cron_flag({is_cron_allowed:!0},Je,1).then((function(e){console.log("Successfully enabled payment.")}))},onReceivePayment:function(e){t.receive_job_payment({dao_owner:y,job_id:e},Je,B()("1").times(Math.pow(10,21)).toFixed()).then((function(e){console.log("Successfully received payment.")}))},wrapContract:m,onUnwrap:P})}),n.accountId===y?Object(u.jsx)(p.b,{path:":job/applications",element:Object(u.jsx)(Ie,{daoData:A})}):null]}),Object(u.jsx)(p.b,{path:"tasks",children:Object(u.jsx)(p.b,{index:!0,element:Object(u.jsx)(ke,{daoData:A,loaded:F})})}),Object(u.jsx)(p.b,{path:"members",children:Object(u.jsx)(p.b,{index:!0,element:Object(u.jsx)(_e,{daoData:A})})}),Object(u.jsx)(p.b,{path:"governance",children:Object(u.jsx)(p.b,{index:!0,element:Object(u.jsx)(Te,{daoData:A,loaded:F})})}),Object(u.jsx)(p.b,{path:"*",element:Object(u.jsx)(Be,{})})]})]})}):Object(u.jsx)(h,{signIn:L})},He=n(140),We=n.n(He),qe=n(41);function ze(){return(ze=Object(c.a)(s.a.mark((function e(){var t,n,c,r,i,o,l,d,j;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=We()(Object({NODE_ENV:"production",PUBLIC_URL:"/challenge-8-rocketo-dao-dashboard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NEAR_ENV||"testnet"),n=new qe.keyStores.BrowserLocalStorageKeyStore,e.next=4,qe.connect(Object(a.a)({keyStore:n},t));case 4:if(c=e.sent,!(r=new qe.WalletConnection(c)).getAccountId()){e.next=12;break}return e.t0=r.getAccountId(),e.next=10,r.account().state();case 10:e.t1=e.sent.amount,i={accountId:e.t0,balance:e.t1};case 12:return e.next=14,new qe.Contract(r.account(),t.contractName,{viewMethods:["get_dao","get_daos"],changeMethods:["cancel_job","start_job","create_job_offering","apply_for_job","create_dao","receive_job_payment"],sender:r.getAccountId()});case 14:return o=e.sent,e.next=17,new qe.Contract(r.account(),"streaming-r-v2.dcversus.testnet",{viewMethods:["get_stream","get_account"],changeMethods:["account_update_cron_flag","stop_stream"],sender:r.getAccountId()});case 17:return l=e.sent,e.next=20,new qe.Contract(r.account(),"wrap.testnet",{viewMethods:["ft_balance_of"],changeMethods:["near_withdraw"],sender:r.getAccountId()});case 20:return d=e.sent,j=c.connection.provider,e.abrupt("return",{contract:o,currentUser:i,nearConfig:t,walletConnection:r,provider:j,roketoContract:l,wrapContract:d});case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.nearInitPromise=function(){return ze.apply(this,arguments)}().then((function(e){var t,n,a=e.contract,c=e.currentUser,r=e.nearConfig,s=e.walletConnection,i=e.provider,o=e.roketoContract,l=e.wrapContract,b=new URLSearchParams(window.location.search);b.has("transactionHashes")&&(t=b.get("transactionHashes")),b.has("errorMessage")&&(n=b.get("errorMessage")),d.a.render(Object(u.jsx)(j.a,{children:Object(u.jsx)(Ve,{contract:a,currentUser:c,nearConfig:r,wallet:s,lastTransaction:t,provider:i,error:n,roketoContract:o,wrapContract:l})}),document.getElementById("root"))}))}},[[344,1,2]]]);
//# sourceMappingURL=main.f3b833ae.chunk.js.map