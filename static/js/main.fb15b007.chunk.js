(this["webpackJsonpdao-dashboard-react"]=this["webpackJsonpdao-dashboard-react"]||[]).push([[0],{105:function(e,t){var n=Object({NODE_ENV:"production",PUBLIC_URL:"/challenge-8-rocketo-dao-dashboard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).CONTRACT_NAME||"dao-dashboard.cryptosketches.testnet";e.exports=function(e){switch(e){case"production":case"mainnet":return{networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",contractName:n,walletUrl:"https://wallet.near.org",helperUrl:"https://helper.mainnet.near.org"};case"development":case"testnet":return{networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",contractName:n,walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org"};case"betanet":return{networkId:"betanet",nodeUrl:"https://rpc.betanet.near.org",contractName:n,walletUrl:"https://wallet.betanet.near.org",helperUrl:"https://helper.betanet.near.org"};case"local":return{networkId:"local",nodeUrl:"http://localhost:3030",keyPath:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/challenge-8-rocketo-dao-dashboard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).HOME,"/.near/validator_key.json"),walletUrl:"http://localhost:4000/wallet",contractName:n};case"test":case"ci":return{networkId:"shared-test",nodeUrl:"https://rpc.ci-testnet.near.org",contractName:n,masterAccount:"test.near"};case"ci-betanet":return{networkId:"shared-test-staging",nodeUrl:"https://rpc.ci-betanet.near.org",contractName:n,masterAccount:"test.near"};default:throw Error("Unconfigured environment '".concat(e,"'. Can be configured in src/config.js."))}}},178:function(e,t,n){},179:function(e){e.exports=JSON.parse('{"name":"dao-dashboard-react","version":"1.0.6","homepage":"https://near-hackathon-luciferius.github.io/challenge-8-rocketo-dao-dashboard","private":true,"dependencies":{"@emotion/react":"^11.9.0","@emotion/styled":"^11.8.1","@mui/icons-material":"^5.6.2","@mui/material":"^5.6.2","@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","js-sha256":"^0.9.0","materialize-css":"^1.0.0-rc.2","near-api-js":"^0.42.0","react":"^17.0.0","react-burger-menu":"^3.0.6","react-dom":"^17.0.0","react-iframe":"^1.8.0","react-materialize":"^3.10.0","react-native-sha":"^0.1.6","react-router-dom":"^6.3.0","react-scripts":"4.0.3","save":"^2.4.0","save-dev":"^0.0.1-security","styled-components":"^5.2.0","web-vitals":"^1.0.1"},"scripts":{"start":"parcel src/index.html","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -d build -u \'Pages Bot <pages.bot@nonexisting.io>\'"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"gh-pages":"^3.2.3","parcel-bundler":"^1.12.5"}}')},186:function(e,t){},196:function(e,t){},242:function(e,t,n){"use strict";n.r(t);var a=n(92),c=n(27),r=n(8),s=n.n(r),i=n(1),o=n.n(i),l=n(51),j=n.n(l),d=n(9),b=n(6),h=n(10),m=n(0);function u(e){var t=e.signIn;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsx)("h1",{children:"Kawaii Zoo Homepage"})}),Object(m.jsx)(h.Button,{small:!0,onClick:t,children:"Log in"}),Object(m.jsx)("p",{children:"This app was developed for the NEAR Spring hackathon. In order to use the app you need to sign in with your NEAR wallet."})]})}var p=n(5),O=n(93),x=n.n(O),f=n(95),g=n.n(f),v=function(e){return Object(m.jsx)("div",{className:"popup-box",children:Object(m.jsxs)("div",{className:"box",children:[Object(m.jsx)("span",{className:"close-icon",onClick:e.handleClose,children:"x"}),e.content]})})},w=function(e){var t=e.currentUser,n=e.signIn,a=e.signOut,c=e.clearMessage,r=e.message;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{id:"App",children:[Object(m.jsx)(p.a,{}),t?Object(m.jsx)(h.Button,{onClick:a,floating:!0,large:!0,className:"btn-login",icon:Object(m.jsx)(x.a,{fontSize:"large",className:"btn-icon"}),tooltip:"Log out "+t.accountId+"."}):Object(m.jsx)(h.Button,{onClick:n,floating:!0,large:!0,className:"btn-login",icon:Object(m.jsx)(g.a,{fontSize:"large",className:"btn-icon"}),tooltip:"Log in using NEAR wallet."}),r&&Object(m.jsx)(v,{content:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("b",{children:"A message for you"}),Object(m.jsx)("p",{children:r})]}),handleClose:c})]})})},N=n(96),y=function(e){var t=e.setDao,n=Object(p.h)().dao;return Object(i.useEffect)((function(){t(n)}),[n,t]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(N.slide,{pageWrapId:"page-wrapper",outerContainerId:"App",children:[Object(m.jsx)(d.b,{className:"menu-item",to:"",children:"Dao Dashboard"}),Object(m.jsx)(d.b,{className:"menu-item",to:"jobs",children:"Jobs"}),Object(m.jsx)(d.b,{className:"menu-item",to:"tasks",children:"Tasks"}),Object(m.jsx)(d.b,{className:"menu-item",to:"members",children:"Members"})]}),Object(m.jsx)("main",{id:"page-wrapper",children:Object(m.jsx)(p.a,{})})]})};function _(e){var t=e.version;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("main",{id:"page-wrapper",children:[Object(m.jsx)("header",{children:Object(m.jsxs)("h1",{children:["NEAR Challenge #8 - DAO Dashboard - ",t]})}),Object(m.jsx)("p",{children:"Create a new DAO or enter existing ones."})]})})}var C=n(99),S=n.n(C),k=n(98),I=n.n(k),A=n(97),T=n.n(A);function D(e){var t=e.daoData,n=e.loading,a=(Object(p.h)().dao,Object(i.useState)("")),c=Object(b.a)(a,2),r=c[0],s=c[1],o=Object(i.useState)(""),l=Object(b.a)(o,2),j=l[0],h=l[1],u=Object(i.useState)(""),O=Object(b.a)(u,2),x=O[0],f=O[1];return Object(i.useEffect)((function(){t.jobs&&(f(t.jobs.length),h(Math.floor(10*Math.random())),s(Math.floor(100*Math.random())))}),[t]),n&&m.Fragment,Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsxs)("h1",{children:[t.name," Dashboard"]})}),Object(m.jsxs)("div",{className:"flex flex-row justify-between",children:[Object(m.jsx)(d.b,{className:"bm-item menu-item flex-grow medium-margin-right",to:"members",children:Object(m.jsx)("div",{className:"card card-stats",children:Object(m.jsx)("div",{className:"card-body",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col s5 text-center",children:[Object(m.jsx)(T.a,{className:"icon-big"}),Object(m.jsx)("p",{className:"small",children:"Members"})]}),Object(m.jsx)("div",{className:"col s7 numbers",children:Object(m.jsx)("h5",{children:r})})]})})})}),Object(m.jsx)(d.b,{className:"bm-item menu-item flex-grow medium-margin-right",to:"tasks",children:Object(m.jsx)("div",{className:"card card-stats",children:Object(m.jsx)("div",{className:"card-body",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col s5 text-center",children:[Object(m.jsx)(I.a,{className:"icon-big"}),Object(m.jsx)("p",{className:"small",children:"Tasks"})]}),Object(m.jsx)("div",{className:"col s7 numbers",children:Object(m.jsx)("h5",{children:j})})]})})})}),Object(m.jsx)(d.b,{className:"bm-item menu-item flex-grow",to:"jobs",children:Object(m.jsx)("div",{className:"card card-stats",children:Object(m.jsx)("div",{className:"card-body",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col s5 text-center",children:[Object(m.jsx)(S.a,{className:"icon-big"}),Object(m.jsx)("p",{className:"small",children:"Jobs"})]}),Object(m.jsx)("div",{className:"col s7 numbers",children:Object(m.jsx)("h5",{children:x})})]})})})})]}),Object(m.jsx)("p",{className:"bigger-font",children:t.description})]})}function E(e){var t=e.onJobCreation;return Object(m.jsx)("form",{onSubmit:t,children:Object(m.jsxs)("fieldset",{id:"fieldset",className:"flex flex-col details-view flex-grow",children:[Object(m.jsxs)("div",{className:"highlight flex flex-col",children:[Object(m.jsx)("h5",{children:"Create a new job offering"}),Object(m.jsx)("p",{children:"Add all required parameter for the new job and hit the 'Create' button."}),Object(m.jsx)(h.TextInput,{autoComplete:"off",autoFocus:!0,id:"name_prompt",label:"The name of the job.",required:!0}),Object(m.jsx)(h.TextInput,{autoComplete:"off",id:"description_prompt",label:"A detailed description of the job.",required:!0}),Object(m.jsx)(h.TextInput,{autoComplete:"off",id:"payment_prompt",defaultValue:"1",min:"0",step:"1",type:"number",label:"The payment for the job in \u24c3.",required:!0}),Object(m.jsx)(h.TextInput,{autoComplete:"off",id:"duration_prompt",defaultValue:"172800",min:"1",step:"1",type:"number",label:"The duration for the job offer in s.",required:!0})]}),Object(m.jsx)(h.Button,{type:"submit",small:!0,tooltip:"Creates the job and deposits the chosen payment.",children:"Create"})]})})}var F=function(e){var t=e.daoData,n=e.loaded,a=e.currentUser,c=e.onJobCreation,r=Object(p.h)().dao,s=Object(i.useState)([]),o=Object(b.a)(s,2),l=o[0],j=o[1],h=Object(i.useState)([]),u=Object(b.a)(h,2),O=u[0],x=u[1],f=Object(i.useState)([]),g=Object(b.a)(f,2),v=g[0],w=g[1];Object(i.useEffect)((function(){t.jobs&&(j(N(t.jobs.filter((function(e){return"Open"===e.state})),3)),x(N(t.jobs.filter((function(e){return"InProgress"===e.state})),3)),w(N(t.jobs.filter((function(e){return"Canceled"===e.state})),3)))}),[t]);var N=function(e,t){for(var n=[],a=0,c=e.length;a<c;)n.push(e.slice(a,a+=t));return n};return n?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsxs)("h1",{children:[t.name,"'s Jobs Board"]})}),Object(m.jsx)("h5",{children:"Open Jobs"}),t.jobs.length>0?l.map((function(e){return Object(m.jsx)("div",{className:"row",children:e.map((function(e){return Object(m.jsx)("div",{className:"col s4",children:Object(m.jsx)(d.b,{className:"bm-item menu-item",to:e.id,children:Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-title",children:e.name}),Object(m.jsx)("div",{className:"card-content",children:Object(m.jsx)("p",{children:e.description})})]})})})}))})})):Object(m.jsx)("p",{children:"Currently there are no open jobs available."}),Object(m.jsx)("h5",{children:"Active Jobs"}),t.jobs.length>0?O.map((function(e){return Object(m.jsx)("div",{className:"row",children:e.map((function(e){return Object(m.jsx)("div",{className:"col s4",children:Object(m.jsx)(d.b,{className:"bm-item menu-item",to:e.id,children:Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-title",children:e.name}),Object(m.jsx)("div",{className:"card-content",children:Object(m.jsx)("p",{children:e.description})})]})})})}))})})):Object(m.jsx)("p",{children:"Currently there are no active jobs."}),Object(m.jsx)("h5",{children:"Canceled Jobs"}),t.jobs.length>0?v.map((function(e){return Object(m.jsx)("div",{className:"row",children:e.map((function(e){return Object(m.jsx)("div",{className:"col s4",children:Object(m.jsx)(d.b,{className:"bm-item menu-item",to:e.id,children:Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-title",children:e.name}),Object(m.jsx)("div",{className:"card-content",children:Object(m.jsx)("p",{children:e.description})})]})})})}))})})):Object(m.jsx)("p",{children:"Currently there are no canceled jobs."}),r===a.accountId?Object(m.jsx)(E,{onJobCreation:c}):null]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsxs)("h1",{children:[r,"'s Jobs Board"]})}),Object(m.jsx)("h1",{children:"Loading..."})]})},U=n(100),J=n(28),M=n.n(J),R=function(e){var t=e.jobData,n=e.onCancelJob,a=e.onStartJob,c=Object(i.useState)(),r=Object(b.a)(c,2),s=r[0],o=r[1],l=Object(p.g)();if(!t)return null;switch(t.state){case"InProgress":return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(h.Button,{large:!0,tooltip:"Canceles the payment an the job offering. Important: A new job has to be created afterwards.",onClick:function(){return n(t.id)},children:"Cancel Contract"})});case"Open":return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"flex flex-col flex-grow medium-margin-right",children:Object(m.jsx)(h.TextInput,{autoComplete:"off",label:"NEAR account id of the contracted.",onChange:function(e){o(e.target.value)}})}),Object(m.jsx)(h.Button,{large:!0,tooltip:"Assigns the contracted and starts the job immediately.",onClick:function(){return a(t.id,s)},className:s?"medium-margin-right":"medium-margin-right disabled",children:"Assign Contracted And Start"}),Object(m.jsx)(h.Button,{large:!0,onClick:function(){l("applications")},children:"View Applications"})]});default:return null}};function B(e){var t=e.onApplyForJob,n=e.jobId;return Object(m.jsx)("form",{onSubmit:t,children:Object(m.jsxs)("fieldset",{id:"fieldset",className:"flex flex-col details-view flex-grow",children:[Object(m.jsxs)("div",{className:"highlight flex flex-col",children:[Object(m.jsx)("h5",{children:"Apply for the job"}),Object(m.jsx)("p",{children:"Write your most inspiring application down below."}),Object(m.jsx)(h.TextInput,{autoComplete:"off",id:"job_id",label:"The job ID. Do not change it!",required:!0,inputClassName:"disabled",value:n}),Object(m.jsx)(h.Textarea,{autoFocus:!0,id:"application_prompt",label:"Here is the space for your amazing application.",required:!0})]}),Object(m.jsx)(h.Button,{type:"submit",small:!0,tooltip:"Applies for the job. In order to change your application simply fill the form again.",children:"Apply"})]})})}var P=function(e){var t=e.daoData,n=e.currentUser,a=e.onCancelJob,c=e.onStartJob,r=e.onApplyForJob,s=Object(p.h)(),o=s.dao,l=s.job,j=Object(i.useState)(),d=Object(b.a)(j,2),h=d[0],u=d[1],O=Object(i.useState)(),x=Object(b.a)(O,2),f=x[0],g=x[1];return Object(i.useEffect)((function(){if(t.jobs){var e=t.jobs.find((function(e){return e.id===l})),n=parseInt(e.payment_cycle_in_s),a=n%60,c=Math.floor(n%3600/60),r=Math.floor(n%86400/3600),s=Math.floor(n/86400);n="",s&&(n+=" "+s+"d"),r&&(n+=" "+r+"h"),c&&(n+=" "+c+"m"),a&&(n+=" "+a+"s"),e.duration=n,u(e),g(M()(e.payment).div(Math.pow(10,24)).toFixed(2))}}),[t,l]),h?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsxs)("h1",{children:[h.name,"'s Details"]})}),Object(m.jsx)("div",{className:"flex flex-row-wrap justify-between margin-row-small",children:n.accountId===o?Object(m.jsx)(R,{jobData:h,onCancelJob:a,onStartJob:c}):null}),Object(m.jsxs)("div",{className:"flex flex-row-wrap justify-between",children:[Object(m.jsxs)("div",{className:"details-view flex flex-col flex-grow medium-margin-right",children:[Object(m.jsx)("div",{className:"margin-row-small text-bigger",children:h.description}),Object(m.jsxs)("div",{className:"flex justify-between margin-row-small",children:[Object(m.jsx)("div",{className:"text-unimportant min-margin-right",children:"Status:"}),Object(m.jsx)("div",{children:h.state})]}),Object(m.jsxs)("div",{className:"flex justify-between margin-row-small",children:[Object(m.jsx)("div",{className:"text-unimportant min-margin-right",children:"Total Payment:"}),Object(m.jsxs)("div",{children:[f," \u24c3"]})]}),Object(m.jsxs)("div",{className:"flex justify-between margin-row-small",children:[Object(m.jsx)("div",{className:"text-unimportant min-margin-right",children:"Contract Duration:"}),Object(m.jsx)("div",{children:h.duration})]}),Object(m.jsxs)("div",{className:"flex justify-between margin-row-small",children:[Object(m.jsx)("div",{className:"text-unimportant min-margin-right",children:"Applications:"}),Object(m.jsx)("div",{children:h.applicants.length})]}),Object(m.jsxs)("div",{className:"flex justify-between margin-row-small",children:[Object(m.jsx)("div",{className:"text-unimportant min-margin-right",children:"Contracted:"}),Object(m.jsx)("div",{children:h.contracted})]})]}),h.payment_stream_id?Object(m.jsx)("div",{children:Object(m.jsx)(U.a,{url:"https://test.app.roke.to/#/streams/"+h.payment_stream_id,position:"relative",overflow:"hidden",className:"roketo-iframe"})}):null]}),o!==n.accountId?Object(m.jsx)("div",{className:"margin-row-big",children:Object(m.jsx)(B,{onApplyForJob:r,jobId:h.id})}):null]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsxs)("h1",{children:[l,"'s Details"]})}),Object(m.jsx)("h1",{children:"Loading..."})]})},H=function(){var e=Object(p.h)().dao;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsxs)("h1",{children:[e,"'s Members"]})}),Object(m.jsx)("p",{children:"Members here."})]})},L=function(){var e=Object(p.h)(),t=e.dao,n=e.member;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsxs)("h1",{children:[n,"'s Details"]})}),Object(m.jsxs)("p",{children:["Member ",n," of ",t,"."]})]})},W=function(){var e=Object(p.h)().dao;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsxs)("h1",{children:[e,"'s Tasks Board"]})}),Object(m.jsx)("p",{children:"Tasks here."})]})},K=function(){var e=Object(p.h)(),t=e.dao,n=e.task;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsxs)("h1",{children:[n,"'s Details"]})}),Object(m.jsxs)("p",{children:["Task ",n," of ",t,"."]})]})},q=n(102),V=n.n(q),z=n(101),Z=n.n(z),G=function(e){var t=e.daoData,n=Object(p.h)().job,a=Object(i.useState)(),r=Object(b.a)(a,2),o=r[0],l=r[1],j=Object(i.useState)(),d=Object(b.a)(j,2),u=d[0],O=d[1],x=Object(p.g)();Object(i.useEffect)((function(){if(t.jobs){var e=t.jobs.find((function(e){return e.id===n}));l(f(e.applicants,2)),O(e.name)}}),[t,n]);var f=function(e,t){for(var n=[],a=0,c=e.length;a<c;)n.push(e.slice(a,a+=t));return n},g=function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsxs)("h1",{children:[u,"'s Applications"]})}),Object(m.jsx)("div",{className:"flex flex-row-wrap justify-between margin-row-small",children:Object(m.jsx)(h.Button,{large:!0,onClick:function(){x(-1)},children:Object(m.jsxs)("div",{className:"flex flex-row",children:[Object(m.jsx)("div",{className:"min-margin-right",children:Object(m.jsx)(Z.a,{className:"btn-icon"})}),Object(m.jsx)("div",{children:"Back"})]})})}),o.length>0?o.map((function(e){return Object(m.jsx)("div",{className:"row",children:e.map((function(e){return Object(m.jsx)("div",{className:"col s6",children:Object(m.jsxs)("div",{className:"card",children:[Object(m.jsxs)("div",{className:"card-title flex flex-row",children:[Object(m.jsx)("div",{className:"min-margin-right",children:e.applicant}),Object(m.jsx)("div",{className:"bm-item menu-item",onClick:function(){return g(e.applicant)},children:Object(m.jsx)(V.a,{className:"btn-icon"})})]}),Object(m.jsx)("div",{className:"card-content",children:Object(m.jsx)("p",{className:"preserve-newline",children:e.application})})]})})}))})})):Object(m.jsx)("p",{children:"Currently there are no applications for the job. Come back later."})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsxs)("h1",{children:[n,"'s Applications"]})}),Object(m.jsx)("h1",{children:"Loading..."})]})},Q=n(103),X=n(104),Y=n(107),$=n(106),ee=n.p+"static/media/404.6fa35088.jpg",te=function(e){Object(Y.a)(n,e);var t=Object($.a)(n);function n(){return Object(Q.a)(this,n),t.apply(this,arguments)}return Object(X.a)(n,[{key:"render",value:function(){return Object(m.jsx)("img",{src:ee,alt:"Nothing is here.",width:"900",style:{margin:"10em"}})}}]),n}(o.a.Component),ne=te,ae=(n(177),n(178),n(179).version);n(180);var ce=M()(3).times(Math.pow(10,14)).toFixed(),re=function(e){var t=e.contract,n=e.currentUser,a=e.nearConfig,r=e.wallet,o=e.provider,l=e.lastTransaction,j=e.error,d=Object(i.useState)(""),h=Object(b.a)(d,2),O=h[0],x=h[1],f=Object(i.useState)(""),g=Object(b.a)(f,2),v=g[0],N=g[1],C=Object(i.useState)([]),S=Object(b.a)(C,2),k=S[0],I=S[1],A=Object(i.useState)(!1),T=Object(b.a)(A,2),E=T[0],U=T[1];Object(i.useEffect)((function(){function e(){return e=Object(c.a)(s.a.mark((function e(t,n){var a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.txStatus(t,n);case 2:a=e.sent,(c=a.receipts_outcome[0].outcome.logs.pop())||(c=a.receipts_outcome[3].outcome.logs.pop()),c&&x(c);case 6:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}j?(x(decodeURI(j)),window.history.pushState({},"",window.location.origin+window.location.pathname+window.location.hash)):l&&n&&(!function(t,n){e.apply(this,arguments)}(l,n.accountId),window.history.pushState({},"",window.location.origin+window.location.pathname+window.location.hash))}),[l,j,n,o]),Object(i.useEffect)((function(){function e(){return(e=Object(c.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.get_dao({dao_owner:v});case 4:n=e.sent,console.log(n),I(n),U(!0);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,n,v]);var J=function(){r.requestSignIn({contractId:a.contractName,methodNames:[t.cancel_job.name,t.start_job.name,t.create_job_offering.name,t.apply_for_job.name]},"NEAR Challenge #8 - DAO Dashboard",null,null)};return n?Object(m.jsx)(p.d,{children:Object(m.jsxs)(p.b,{path:"/",element:Object(m.jsx)(w,{currentUser:n,signIn:J,signOut:function(){r.signOut()},clearMessage:function(){x("")},message:O}),children:[Object(m.jsx)(p.b,{index:!0,element:Object(m.jsx)(_,{version:ae})}),Object(m.jsxs)(p.b,{path:":dao",element:Object(m.jsx)(y,{setDao:N}),children:[Object(m.jsx)(p.b,{index:!0,element:Object(m.jsx)(D,{daoData:k,loaded:E})}),Object(m.jsxs)(p.b,{path:"jobs",children:[Object(m.jsx)(p.b,{index:!0,element:Object(m.jsx)(F,{daoData:k,loaded:E,onJobCreation:function(e){e.preventDefault();var n=e.target.elements,a=n.fieldset,c=n.name_prompt,r=n.description_prompt,s=n.payment_prompt,i=n.duration_prompt,o=M()(s.value).times(Math.pow(10,24)).toFixed();a.disabled=!0,t.create_job_offering({name:c.value,description:r.value,payment:o,payment_cycle_in_s:i.value},ce,o).then((function(e){console.log("Successfully created job.")}))},currentUser:n})}),Object(m.jsx)(p.b,{path:":job",element:Object(m.jsx)(P,{daoData:k,currentUser:n,onCancelJob:function(e){t.cancel_job({job_id:e},ce,M()("1").times(Math.pow(10,21)).toFixed()).then((function(e){console.log("Successfully canceled.")}))},onStartJob:function(e,n){t.start_job({job_id:e,contracted:n},ce,M()("1").times(Math.pow(10,22)).toFixed()).then((function(e){console.log("Successfully started.")}))},onApplyForJob:function(e){e.preventDefault();var n=e.target.elements,a=n.fieldset,c=n.job_id,r=n.application_prompt;a.disabled=!0,t.apply_for_job({dao_owner:v,job_id:c.value,application:r.value},ce,0).then((function(e){console.log("Successfully added application.")}))}})}),n.accountId===v?Object(m.jsx)(p.b,{path:":job/applications",element:Object(m.jsx)(G,{daoData:k})}):null]}),Object(m.jsxs)(p.b,{path:"tasks",children:[Object(m.jsx)(p.b,{index:!0,element:Object(m.jsx)(W,{})}),Object(m.jsx)(p.b,{path:":task",element:Object(m.jsx)(K,{})})]}),Object(m.jsxs)(p.b,{path:"members",children:[Object(m.jsx)(p.b,{index:!0,element:Object(m.jsx)(H,{version:ae,nearConfig:a})}),Object(m.jsx)(p.b,{path:":member",element:Object(m.jsx)(L,{})})]}),Object(m.jsx)(p.b,{path:"*",element:Object(m.jsx)(ne,{})})]})]})}):Object(m.jsx)(u,{signIn:J})},se=n(105),ie=n.n(se),oe=n(39);function le(){return(le=Object(c.a)(s.a.mark((function e(){var t,n,c,r,i,o,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ie()(Object({NODE_ENV:"production",PUBLIC_URL:"/challenge-8-rocketo-dao-dashboard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NEAR_ENV||"testnet"),n=new oe.keyStores.BrowserLocalStorageKeyStore,e.next=4,oe.connect(Object(a.a)({keyStore:n},t));case 4:if(c=e.sent,!(r=new oe.WalletConnection(c)).getAccountId()){e.next=12;break}return e.t0=r.getAccountId(),e.next=10,r.account().state();case 10:e.t1=e.sent.amount,i={accountId:e.t0,balance:e.t1};case 12:return e.next=14,new oe.Contract(r.account(),t.contractName,{viewMethods:["get_dao"],changeMethods:["cancel_job","start_job","create_job_offering","apply_for_job"],sender:r.getAccountId()});case 14:return o=e.sent,l=c.connection.provider,e.abrupt("return",{contract:o,currentUser:i,nearConfig:t,walletConnection:r,provider:l});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.nearInitPromise=function(){return le.apply(this,arguments)}().then((function(e){var t,n,a=e.contract,c=e.currentUser,r=e.nearConfig,s=e.walletConnection,i=e.provider,o=new URLSearchParams(window.location.search);o.has("transactionHashes")&&(t=o.get("transactionHashes")),o.has("errorMessage")&&(n=o.get("errorMessage")),j.a.render(Object(m.jsx)(d.a,{children:Object(m.jsx)(re,{contract:a,currentUser:c,nearConfig:r,wallet:s,lastTransaction:t,provider:i,error:n})}),document.getElementById("root"))}))}},[[242,1,2]]]);
//# sourceMappingURL=main.fb15b007.chunk.js.map